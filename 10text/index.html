<!DOCTYPE html>
<html>

<head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script src="https://code.createjs.com/createjs-2014.12.12.min.js"></script>
    <script src='//localhost:3000/socket.io/socket.io.js'></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.2/underscore-min.js"></script>
    <title></title>
    <style>
    * {
        margin: 0;
        padding: 0;
    }
    
    #canvas {
        background: #000;
    }
    </style>
</head>

<body>
    <script>
     
    var data;
    // var socket = io.connect('//localhost:3000');

    // socket.on('welcome', function(data) {
    //     $('#messages').append('<li>' + data.message + '</li>');

    //     socket.emit('i am client', {
    //         data: 'foo!'
    //     });
    // });
    // socket.on('tweet', function(data) {
    //         console.log(data);
    //         data = data.message;
    //         //console.log(data);
    //         // clock();
    //     });
    // socket.on('error', function() {
    //     console.error(arguments)
    // });
    // socket.on('message', function() {
    //     console.log(arguments);

    // });
            var items = [
            "complex",
            "Collaborative",
            "Anti-schedule",
            "dynamic",
            "different",
            "Transparentcy",
            "automated ",
            "innovation",
            "Piecemeal",
            "collaboration",
            "complicated",
            "less",
            "selfpreneurs",
            "insecure",
            "on-demand",
            "Risky",
            "virtual online assistant",
            "LIMITLESS",
            "Exclusive",
            "Flexible",
            "unpredictable",
            "Innovative",
            "disparity",
            "Computery",
            "Modular",
            "flexible",
            "convoluted",
            "uncertain",
            "lifestyle",
            "exciting",
            "Agism",
            "Hustle",
            "challenging",
            "Transparent",
            "independence",
            "Transformative",
            "globalization",
            "Flexible",
            "boundless",
            "universal",
            "Innovation",
            "entrepreneurial",
            "Growth",
            "Mobility",
            "selfemployment",
            "collaborative",
            "Difficult",
            "Ambitious",
            "transformative",
            "opportunity",
            "Liberating!",
            "Mobile",
            "adapting",
            "Collaborate",
            "Independent ",
            "challenge",
            "independent",
            "Flexible",
            "interesting",
            "Growth",
            "uncertain",
            "Co-inspiring",
            "disruptive",
            "Innovative",
            "Unknown",
            "Clash",
            "mobile",
            "self-sufficiency",
            "challenging",
            "innovative ",
            "Remote",
            "liberating ",
            "Groundbreaking.",
            "awesome!",
            "malleable",
            "difficult",
            "Streaming",
            "change",
            "change",
            "Contingent",
            "transformative",
            "flexible",
            "sustainable",
            "engagement",
            "unpredictable",
            "flexible ",
            "antidisestablishmentarianist",
            "dystopian?",
            "Freelance",
            "regressive",
            "Evolving ",
            "Flux",
            "fast",
            "it",
            "Evolutionism",
            "Less",
            "AWESOME",
            "scary",
            "Connected",
            "dedication",
            "Confusing ",
            "competitive",
            "Virtual",
            "Creative",
            "global",
            "Evolved",
            "supreme",
            "unshackled",
            "chaotic",
            "Capricious",
            "Liberating",
            "Liberating ",
            "Uncertainty",
            "Flexibility",
            "Unknown",
            "Flexible ",
            "unknown",
            "shifting",
            "Grounbreaking",
            "flexible",
            "iterative",
            "Flexible",
            "goblins",
            "Flexibility",
            "transformed",
            "Transformative",
            "Limitless",
            "independent",
            "Uncertain",
            "ever-evolving ",
            "changing",
            "ever-changing",
            "Constant",
            "Evolving",
            "Demands",
            "Complex",
            "design",
            "Fluid",
            "Self",
            "automated",
            "Exciting and scary",
            "Solutions",
            "Remote",
            "Freedom",
            "Augmented",
            "moveable",
            "Unsustainable",
            "Creative ",
            "AlwaysOn",
            "Flexible",
            "time management",
            "Excellent",
            "Barter",
            "flexible",
            "Freelance",
            "Work!",
            "fluid",
            "collaboration",
            "soloentrepreneurs",
            "Changing",
            "unstable",
            "flexible",
            "sad",
            "dynamic",
            "contracted",
            "Freelance Video Editor",
            "Flexibility ",
            "scary",
            "Creative",
            "projectized",
            "fierce",
            "mobile",
            "Creative",
            "contracting",
            "Flexible",
            "flexible",
            "Dynamic",
            "revolutionary",
            "Entrepreneurship",
            "challenging ",
            "mobile ",
            "Eminent",
            "Personal",
            "Banker",
            "Hope",
            "on-demand",
            "Challenging ",
            "fluxy",
            "Purpose",
            "Hollow",
            "multi-platform",
            "independent",
            "different",
            "individualistic"
        ];
        function randVar() {
        data = "Space Cucumber"
        // data = items[Math.floor(Math.random()*items.length)];
        // $('#tweet').text(randomItem);
        clock();
        }
        setInterval(randVar, 5000);

    var ctx;
    var stage;
    var stageWidth;
    var stageHeight;
    var particles = [];
    var particleCount = 1550;
    var speed = .5;
    var cull = 3;
    var r = 0;
    
    function init() {
        var canvas = document.getElementById("canvas");
        ctx = canvas.getContext("2d");
        stage = new createjs.Stage(canvas);

        for (var i = 0; i < particleCount; i++) {
            var color = "rgba(" + _.random(64) + "," + _.random(32, 192) + ",255,1)";
            var radius = Math.floor(Math.random() * 10) / 10 + 1.5;
            var x = 0;
            var y = 0;
            var vx = (1 - Math.random() * 8);
            var vy = (1 - Math.random() * 8);
            var vx2 = (1 - Math.random() * 8) * 0.1;
            var vy2 = (1 - Math.random() * 8) * 0.1;

            var particle = createParticle(color, radius, x, y, vx, vy, vx2, vy2);
            particles.push(particle);
            stage.addChild(particle);
        }

        resize();
        // clock();
    }

    window.onload = init;

    function createParticle(color, radius, x, y, vx, vy, vx2, vy2) {
        var particle = new createjs.Shape();
        particle.graphics.beginFill(color);
        particle.graphics.drawCircle(0, 0, radius);
        particle.x = x;
        particle.y = y;
        particle.endX = x;
        particle.endY = y;
        particle.vx = vx;
        particle.vy = vy;
        particle.vx2 = vx2;
        particle.vy2 = vy2;

        return particle;
    }

    function clock() {
        var date = new Date();
        var h = (date.getHours() > 9) ? date.getHours() : "0" + date.getHours();
        var m = (date.getMinutes() > 9) ? date.getMinutes() : "0" + date.getMinutes();
        var s = (date.getSeconds() > 9) ? date.getSeconds() : "0" + date.getSeconds();
        var time = h + " " + m + " " + s;

        

        var text = new createjs.Text(data, "85px Arial", "#fff");
        text.w = Math.floor(text.getMeasuredWidth());
        text.h = Math.floor(text.getMeasuredLineHeight());
        text.x = Math.floor(stageWidth / 2 - text.w / 2);
        text.y = Math.floor(stageHeight / 2 - text.h / 2);

        var rect = new createjs.Shape();
        rect.graphics.beginFill("#000");
        rect.graphics.drawRect(0, 0, stageWidth, stageHeight);

        stage.compositeOperation = "default";

        stage.addChild(rect);
        stage.addChild(text);
        stage.update();

        var pixels = ctx.getImageData(text.x, text.y, text.w, text.h);

        stage.removeChild(rect);
        stage.removeChild(text);
        stage.update();

        stage.compositeOperation = "lighter";

        var i = 0;
        for (var w = 0; w < text.w; w += cull) {
            for (var h = 0; h < text.h; h += cull) {
                if (pixels.data[(w + text.w * h) * 4] !== 0 && i < particles.length) {
                    var particle = particles[i];

                    particle.endX = text.x + w;
                    particle.endY = text.y + h;
                    particle.vx = (1 - Math.random());
                    particle.vy = (1 - Math.random());
                    scale = _.random(1, 40);
                    particle.scaleX = scale;
                    particle.scaleY = scale;

                    i++;
                }
            }
        }

        for (var j = i; j < particles.length; j++) {
            var particle = particles[j];

            if (j < r) {
                particle.endX = _.random(stageWidth);
                particle.endY = _.random(stageHeight);
            }
            scale = _.random(1, 5);
            particle.scaleX = scale;
            particle.scaleY = scale;
        }
        r = i;

        // setTimeout(clock, 15000);
    }

    function tick() {
        for (var i = 0; i < particleCount; i++) {
            var particle = particles[i];

            if (i < r) {
                particle.endX += 1 * particle.vx / 10;
                particle.endY += 1 * particle.vy / 10;
                v = 1.05 + Math.random() / 500;
                particle.vx *= v;
                particle.vy *= v;
            } else {
                particle.endX += particle.vx2;
                particle.endY += particle.vy2;
            }

            if (particle.x < 0) {
                particle.x = stageWidth;
                particle.endX = stageWidth;
            } else if (particle.x > stageWidth) {
                particle.x = 0;
                particle.endX = 0;
            }

            if (particle.y < 0) {
                particle.y = stageHeight;
                particle.endY = stageHeight;
            } else if (particle.y > stageHeight) {
                particle.y = 0;
                particle.endY = 0;
            }

            particle.x = particle.x + (particle.endX - particle.x) * speed;
            particle.y = particle.y + (particle.endY - particle.y) * speed;

            if (particle.scaleX > 1) particle.scaleX = particle.scaleX * 0.85;
            if (particle.scaleY > 1) particle.scaleY = particle.scaleY * 0.85;
        }

        stage.update();
    }

    function resize() {
        $("#canvas").attr("width", $(window).width());
        $("#canvas").attr("height", $(window).height());
        stageWidth = $(window).width();
        stageHeight = $(window).height();

        for (var i = 0; i < particleCount; i++) {
            var particle = particles[i];

            particle.x = particle.endX = _.random(stageWidth);
            particle.y = particle.endY = _.random(stageHeight);
        }
    }

    $(window).resize(resize);

    createjs.Ticker.setFPS(15);
    createjs.Ticker.addEventListener("tick", tick);
    $(function() {
    setInterval(clock(), 7000);
    });
    </script>
    <canvas id="canvas"></canvas>
</body>

</html>
